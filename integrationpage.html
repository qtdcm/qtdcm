  <html>
    <head>
      <title>QtDcm Online Documentation</title>
      <!--<link HREF="doxygen.css" REL="stylesheet" TYPE="text/css">-->
      <link HREF="qtdcm_dox.css" REL="stylesheet" TYPE="text/css">
      <link HREF="tabs.css" REL="stylesheet" TYPE="text/css">
      <link rel="Shortcut Icon" type="image/x-icon" href="../qtdcm.ico" />
      </style>
    </head>
    <body>
    <div id="pageHeader">
      <h2><span>QtDcm: A Qt based C++ library for Dicom communication</span></h2>
      <a href=".."><div id="projectname"></div></a>
    </div><!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Integrating <a class="el" href="classQtDcm.html" title="This class contains the widget for managing Dicom data. ">QtDcm</a> in a Qt application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The integration of <a class="el" href="classQtDcm.html" title="This class contains the widget for managing Dicom data. ">QtDcm</a> in a Qt application is very easy but you have to know how to configure the <a class="el" href="classQtDcmManager.html" title="This class is in charge of the different process (dcm2nii), pacs query/retrieve (dcm4chee), temporary directory creation and removing, PACS server settings. ">QtDcmManager</a> class.</p>
<p>This class manage the connections between widgets, dicom communication classes and conversion classes (or command line tools).</p>
<h1><a class="anchor" id="basic_section"></a>
Instanciating the objects</h1>
<p>In your application you have to first instanciate the widgets. Here we only show the case with the main <a class="el" href="classQtDcm.html" title="This class contains the widget for managing Dicom data. ">QtDcm</a> and the <a class="el" href="classQtDcmImportWidget.html">QtDcmImportWidget</a>. </p><div class="fragment"><div class="line"><a class="code" href="classQtDcm.html">QtDcm</a> * mainWidget = <span class="keyword">new</span> <a class="code" href="classQtDcm.html">QtDcm</a>;</div>
<div class="line"><a class="code" href="classQtDcmImportWidget.html">QtDcmImportWidget</a> * importWidget = <span class="keyword">new</span> <a class="code" href="classQtDcmImportWidget.html">QtDcmImportWidget</a>;</div>
</div><!-- fragment --><p>Then you have to set the setting file. This file is stored in your personnal directory and if it doesn't exist it's created with default values. </p><div class="fragment"><div class="line"><a class="code" href="classQtDcmPreferences.html#ab00c3aea2ed4de4d3429ee6cc64ada61">QtDcmPreferences::instance</a>()-&gt;<a class="code" href="classQtDcmPreferences.html#af1bb354bf1599da098f7f2f4e2903019">setIniFile</a>(<span class="stringliteral">&quot;mySettings&quot;</span>);</div>
</div><!-- fragment --><p>Then you have to give the <a class="el" href="classQtDcmManager.html" title="This class is in charge of the different process (dcm2nii), pacs query/retrieve (dcm4chee), temporary directory creation and removing, PACS server settings. ">QtDcmManager</a> class (note that this is a singleton) the pointers to the previous widgets. <a class="el" href="classQtDcmManager.html" title="This class is in charge of the different process (dcm2nii), pacs query/retrieve (dcm4chee), temporary directory creation and removing, PACS server settings. ">QtDcmManager</a> should always be called using the <a class="el" href="classQtDcmManager.html#ac7ce288e05918d85af9f295f2a7873a8">QtDcmManager::instance()</a> method. When setting the widgets, all the connexions are perfomed internally by <a class="el" href="classQtDcmManager.html" title="This class is in charge of the different process (dcm2nii), pacs query/retrieve (dcm4chee), temporary directory creation and removing, PACS server settings. ">QtDcmManager</a>.</p>
<div class="fragment"><div class="line"><a class="code" href="classQtDcmManager.html#ac7ce288e05918d85af9f295f2a7873a8">QtDcmManager::instance</a>()-&gt;<a class="code" href="classQtDcmManager.html#af57aea1255a13738c63b2b396ea4f227">setQtDcmWidget</a>(mainWidget);</div>
<div class="line"><a class="code" href="classQtDcmManager.html#ac7ce288e05918d85af9f295f2a7873a8">QtDcmManager::instance</a>()-&gt;<a class="code" href="classQtDcmManager.html#ae3f18fa9874b7b81c037a9d068d123a2">setImportWidget</a>(importWidget());</div>
</div><!-- fragment --><h1><a class="anchor" id="manager_conf_sec"></a>
QtDcmManager configuration options</h1>
<p>Depending on what you planned to do with this library, it's possible to set behaviour options to QtDcmManger. This behaviour mostly relies on the way dicom data are converted and where they are stored. First there's a mode that you can set if you want to control in the code where the converted data are stored. See QtDcmManager::outputdirmode enum. If you choose <a class="el" href="classQtDcmManager.html#ac406664e5fadd3c5f18c3d053eb984dca03f393d8b3e4efb698051034ed4def36">QtDcmManager::DIALOG</a>, the output directory will be set using a QFileDialog. If you choose <a class="el" href="classQtDcmManager.html#ac406664e5fadd3c5f18c3d053eb984dca4e48ccd39a9a8b8a526c38f2ff8f3b43">QtDcmManager::CUSTOM</a>, you will also have to set manually the output directory. </p><div class="fragment"><div class="line"><a class="code" href="classQtDcmManager.html#ac7ce288e05918d85af9f295f2a7873a8">QtDcmManager::instance</a>()-&gt;<a class="code" href="classQtDcmManager.html#aa221c81d113a8473962a45d1b77cff14">setOutputdirMode</a>(<a class="code" href="classQtDcmManager.html#ac406664e5fadd3c5f18c3d053eb984dca4e48ccd39a9a8b8a526c38f2ff8f3b43">QtDcmManager::CUSTOM</a>);</div>
<div class="line"><a class="code" href="classQtDcmManager.html#ac7ce288e05918d85af9f295f2a7873a8">QtDcmManager::instance</a>()-&gt;<a class="code" href="classQtDcmManager.html#a06f6f481d5bf3b9e2c330ce8d19986a5">setOutputDirectory</a>(myDirectory);</div>
<div class="line">...</div>
<div class="line"></div>
<div class="line">QtDcmManager::instance()-&gt;importSelectedSeries();</div>
</div><!-- fragment --><p>The other useful option is the choice between using the provided converter (call to dcm2nii binary or ITK based conversion class). </p><div class="fragment"><div class="line"><a class="code" href="classQtDcmManager.html#ac7ce288e05918d85af9f295f2a7873a8">QtDcmManager::instance</a>()-&gt;<a class="code" href="classQtDcmManager.html#add97b475758cd991176418ab1862bdb0">useConverter</a>(<span class="keyword">true</span>);</div>
<div class="line">...</div>
<div class="line">or</div>
<div class="line">...</div>
<div class="line">QtDcmManager::instance()-&gt;useConverter(<span class="keyword">false</span>);</div>
</div><!-- fragment --><h1><a class="anchor" id="setting_sec"></a>
Playing with the settings widgets</h1>
<p>There a lots of way to play with settings. By default, the settings are used to configure dicom related stuff, like local dicom settings (AETitle, port, IP) or available dicom servers. There are also settings for the Dcm2nii conversion tool (if you want to use it).</p>
<h2><a class="anchor" id="easy_settings_subsec"></a>
The easiest way: calling the QtDcmPreferencesDialog class</h2>
<p>You just need to call the slot <a class="el" href="classQtDcm.html#a4c663c8dfbbd3cc77490e7eac7cf092b" title="Slot that launch the PACS preferences dialog. ">QtDcm::editPreferences()</a> </p><div class="fragment"><div class="line"><a class="code" href="classQtDcm.html">QtDcm</a> * <a class="code" href="main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> = <span class="keyword">new</span> <a class="code" href="classQtDcm.html">QtDcm</a>;</div>
<div class="line">main-&gt;<a class="code" href="classQtDcm.html#a4c663c8dfbbd3cc77490e7eac7cf092b">editPreferences</a>();</div>
</div><!-- fragment --><h2><a class="anchor" id="embed_settings_subsec"></a>
Used the specific settings widgets</h2>
<p>Theses widgets are designed to be integrate in large applications, in fact you can just add where you want. First you need to instanciate them and to give them he pointer to the instance of <a class="el" href="classQtDcmPreferences.html" title="Class that manages the settings of QtDcm. ">QtDcmPreferences</a>. </p><div class="fragment"><div class="line"><a class="code" href="classQtDcmServersDicomSettingsWidget.html">QtDcmServersDicomSettingsWidget</a> * servers = <span class="keyword">new</span> <a class="code" href="classQtDcmServersDicomSettingsWidget.html">QtDcmServersDicomSettingsWidget</a>;</div>
<div class="line">servers-&gt;setPreferences(<a class="code" href="classQtDcmPreferences.html#ab00c3aea2ed4de4d3429ee6cc64ada61">QtDcmPreferences::instance</a>()); </div>
</div><!-- fragment --><p>In this way it's necessary to add somewhere in your application a way to store the settings. For example a "Save" button. The clicked() signal of this button will be connected with a onSaveClicked() slot that will be in charge to update the settings. Here is the instanciation of the button and the signal/slot connection. </p><div class="fragment"><div class="line"><span class="comment">//instanciate a QPushButton</span></div>
<div class="line">QPushButton * save = <span class="keyword">new</span> QPushButton;</div>
<div class="line">QObject::connect(save, SIGNAL(clicked), <span class="keyword">this</span>, SLOT(onSaveClicked()));</div>
</div><!-- fragment --><p>Here is the slot implementation: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> MyClass::onSaveClicked()</div>
<div class="line">{</div>
<div class="line"> this-&gt;servers-&gt;<a class="code" href="classQtDcmServersDicomSettingsWidget.html#a3646cc3189137c3b6ce7961c3d688e75">updatePreferences</a>(); <span class="comment">//&quot;This&quot; is a bit tricky but this is just an example...</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->

<div style="text-align:right;padding:10px;">
Copyright University of Rennes I, 2011
</div>
</body>
</html>
